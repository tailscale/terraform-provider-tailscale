---
page_title: "tailscale_dns_configuration Resource - terraform-provider-tailscale"
subcategory: ""
description: |-
  The dns_configuration resource allows you to manage the complete DNS configuration for your Tailscale network. See https://tailscale.com/kb/1054/dns for more information.
---

# tailscale_dns_configuration (Resource)

The dns_configuration resource allows you to manage the complete DNS configuration for your Tailscale network. See https://tailscale.com/kb/1054/dns for more information.

~> **Note:** The Tailscale Terraform provider has multiple resources for managing DNS configuration. This resource is meant to manage the entirety of a Tailnet's DNS configuration and conflicts with [tailscale_dns_nameservers](dns_nameservers.md), [tailscale_dns_preferences](dns_preferences.md), [tailscale_dns_search_paths](dns_search_paths.md), and [tailscale_dns_split_nameservers](dns_split_nameservers.md). This resource and previously mentioned resources should not be used simultaneously.

## Example Usage

```terraform
resource "tailscale_dns_configuration" "sample_configuration" {
    nameservers {
        address            = "8.8.8.8"
    }
    nameservers {
        address            = "1.1.1.1"
        use_with_exit_node = true
    }
    split_dns {
        domain             = "foo.example.com"
        nameservers {
            address            = "1.1.1.2"
            use_with_exit_node = true
        }
        nameservers {
            address            = "1.1.1.3"
        }
    }
    split_dns {
        domain             = "bar.example.com"
        nameservers {
            address            = "8.8.8.2"
            use_with_exit_node = true
        }
    }
    search_paths       = ["example.com", "anotherexample.com"]
    override_local_dns = true
    magic_dns = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `magic_dns` (Boolean) Whether or not to enable MagicDNS. Defaults to true.
- `nameservers` (Block List) Set the nameservers used by devices on your network to resolve DNS queries. `override_local_dns` must also be true to prefer these nameservers over local DNS configuration. (see [below for nested schema](#nestedblock--nameservers))
- `override_local_dns` (Boolean) When enabled, use the configured DNS servers in `nameservers` to resolve names outside the tailnet. When disabled, devices will prefer their local DNS configuration. Defaults to false.
- `search_paths` (List of String) Additional search domains. When MagicDNS is on, the tailnet domain is automatically included as the first search domain.
- `split_dns` (Block List) Set the nameservers used by devices on your network to resolve DNS queries on specific domains (requires Tailscale v1.8 or later). Configuration does not depend on `override_local_dns`. (see [below for nested schema](#nestedblock--split_dns))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--nameservers"></a>
### Nested Schema for `nameservers`

Required:

- `address` (String) The nameserver's IPv4 or IPv6 address

Optional:

- `use_with_exit_node` (Boolean) This nameserver will continue to be used when an exit node is selected (requires Tailscale v1.88.1 or later). Defaults to false.


<a id="nestedblock--split_dns"></a>
### Nested Schema for `split_dns`

Required:

- `domain` (String) The nameservers will be used only for this domain.
- `nameservers` (Block List, Min: 1) Set the nameservers used by devices on your network to resolve DNS queries. (see [below for nested schema](#nestedblock--split_dns--nameservers))

<a id="nestedblock--split_dns--nameservers"></a>
### Nested Schema for `split_dns.nameservers`

Required:

- `address` (String) The nameserver's IPv4 or IPv6 address.

Optional:

- `use_with_exit_node` (Boolean) This nameserver will continue to be used when an exit node is selected (requires Tailscale v1.88.1 or later). Defaults to false.

## Import

Import is supported using the following syntax:

```shell
# ID doesn't matter.
terraform import tailscale_dns_configuration.sample_configuration dns_configuration
```
